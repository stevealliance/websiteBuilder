!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("@angular/forms"),require("rxjs/Observable"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/skipWhile"),require("rxjs/add/operator/take"),require("rxjs/add/observable/interval"),require("rxjs/add/observable/fromEvent"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/forms","rxjs/Observable","rxjs/add/operator/debounceTime","rxjs/add/operator/skipWhile","rxjs/add/operator/take","rxjs/add/observable/interval","rxjs/add/observable/fromEvent","@angular/common"],factory):factory((global.ng=global.ng||{},global.ng.angularTinymce=global.ng.angularTinymce||{}),global.ng.core,global._angular_forms,global.Rx,null,null,null,null,null,global.ng.forms)}(this,function(exports,_angular_core,_angular_forms,rxjs_Observable,rxjs_add_operator_debounceTime,rxjs_add_operator_skipWhile,rxjs_add_operator_take,rxjs_add_observable_interval,rxjs_add_observable_fromEvent,_angular_common){"use strict";function tinymceDefaultSettings(){return{tinymceScriptURL:"/assets/tinymce/tinymce.min.js",theme_url:"/assets/tinymce/themes/modern/theme.min.js",skin_url:"/assets/tinymce/skins/lightgray"}}var TinyMceEvents=function(){function TinyMceEvents(){}return TinyMceEvents}();TinyMceEvents.Click="click",TinyMceEvents.DblClick="dblClick",TinyMceEvents.MouseDown="MouseDown",TinyMceEvents.MouseUp="MouseUp",TinyMceEvents.MouseMove="MouseMove",TinyMceEvents.MouseOver="MouseOver",TinyMceEvents.MouseOut="MouseOut",TinyMceEvents.MouseEnter="MouseEnter",TinyMceEvents.MouseLeave="MouseLeave",TinyMceEvents.KeyDown="KeyDown",TinyMceEvents.KeyPress="KeyPress",TinyMceEvents.KeyUp="KeyUp",TinyMceEvents.ContextMenu="ContextMenu",TinyMceEvents.Paste="Paste",TinyMceEvents.Init="Init",TinyMceEvents.Focus="Focus",TinyMceEvents.Blur="Blur",TinyMceEvents.BeforeSetContent="BeforeSetContent",TinyMceEvents.SetContent="SetContent",TinyMceEvents.GetContent="GetContent",TinyMceEvents.PreProcess="PreProcess",TinyMceEvents.PostProcess="PostProcess",TinyMceEvents.NodeChange="NodeChange",TinyMceEvents.Undo="Undo",TinyMceEvents.Redo="Redo",TinyMceEvents.Change="Change",TinyMceEvents.Dirty="Dirty",TinyMceEvents.Remove="Remove",TinyMceEvents.ExecCommand="ExecCommand",TinyMceEvents.PastePreProcess="PastePreProcess",TinyMceEvents.PastePostProcess="PastePostProcess",TinyMceEvents.AddEditor="AddEditor",TinyMceEvents.RemoveEditor="RemoveEditor";var TINYMCE_SETTINGS_TOKEN=new _angular_core.InjectionToken("angular-tinymce-settings"),TinyMceComponent=function(){function TinyMceComponent(_settings,ngZone){var _this=this;this._settings=_settings,this.ngZone=ngZone,this.onModelChange=function(){},this.onModelTouched=function(){},this.click=new _angular_core.EventEmitter,this.dblclick=new _angular_core.EventEmitter,this.mousedown=new _angular_core.EventEmitter,this.mouseup=new _angular_core.EventEmitter,this.mousemove=new _angular_core.EventEmitter,this.mouseover=new _angular_core.EventEmitter,this.mouseout=new _angular_core.EventEmitter,this.mouseenter=new _angular_core.EventEmitter,this.mouseleave=new _angular_core.EventEmitter,this.keydown=new _angular_core.EventEmitter,this.keypress=new _angular_core.EventEmitter,this.keyup=new _angular_core.EventEmitter,this.contextmenu=new _angular_core.EventEmitter,this.paste=new _angular_core.EventEmitter,this.init=new _angular_core.EventEmitter,this.focus=new _angular_core.EventEmitter,this.blur=new _angular_core.EventEmitter,this.beforesetcontent=new _angular_core.EventEmitter,this.setcontent=new _angular_core.EventEmitter,this.getcontent=new _angular_core.EventEmitter,this.preprocess=new _angular_core.EventEmitter,this.postprocess=new _angular_core.EventEmitter,this.nodechange=new _angular_core.EventEmitter,this.undo=new _angular_core.EventEmitter,this.redo=new _angular_core.EventEmitter,this.change=new _angular_core.EventEmitter,this.dirty=new _angular_core.EventEmitter,this.remove=new _angular_core.EventEmitter,this.execcommand=new _angular_core.EventEmitter,this.pastepreprocess=new _angular_core.EventEmitter,this.pastepostprocess=new _angular_core.EventEmitter;var localSettings=this.settings||_settings||{};if(this.settings=Object.assign({},localSettings),!window.tinymce&&!document.getElementById("tinymceScript")){var tag=document.createElement("script");tag.id="tinymceScript",tag.setAttribute("src",this.settings.tinymceScriptURL||"assets/tinymce/tinymce.min.js"),tag.onload=function(){tinymce.baseURL=_this.settings.baseURL},document.body.appendChild(tag)}}return TinyMceComponent.prototype.writeValue=function(obj){var val=null!=obj?obj.toString():"";this.editor?this.editor.setContent(val):this.beforeInitValue=val},TinyMceComponent.prototype.registerOnChange=function(fn){this.onModelChange=fn},TinyMceComponent.prototype.registerOnTouched=function(fn){this.onModelTouched=fn},TinyMceComponent.prototype.setDisabledState=function(disabled){this.disabled=disabled,this.setEditorMode(disabled)},TinyMceComponent.prototype.setEditorMode=function(disabled){this.editor&&(disabled?this.editor.setMode("readonly"):this.editor.setMode("design"))},TinyMceComponent.prototype.ngOnChanges=function(changes){changes.settings&&(this.settings=Object.assign({},changes.settings.currentValue)),changes.isDisabled&&this.setDisabledState(changes.isDisabled.currentValue)},TinyMceComponent.prototype.ngAfterViewInit=function(){var _this=this;this.settings.target=this.elem.nativeElement,this.initCallbacks(this.settings),rxjs_Observable.Observable.interval(300).skipWhile(function(){return!window.tinymce}).take(1).subscribe(function(){tinymce.init(_this.settings)})},TinyMceComponent.prototype.initCallbacks=function(settings){var _this=this,orig=settings.init_instance_callback;settings.init_instance_callback=function(editor){_this.editor=editor,_this.setEditorMode(_this.disabled),null!=_this.beforeInitValue&&_this.editor.setContent(_this.beforeInitValue),orig&&orig(editor),editor.on(TinyMceEvents.Click,function(e){return _this.click.emit(e)}),editor.on(TinyMceEvents.DblClick,function(e){return _this.dblclick.emit(e)}),editor.on(TinyMceEvents.MouseDown,function(e){return _this.mousedown.emit(e)}),editor.on(TinyMceEvents.MouseUp,function(e){return _this.mouseup.emit(e)}),editor.on(TinyMceEvents.MouseMove,function(e){return _this.mousemove.emit(e)}),editor.on(TinyMceEvents.MouseOver,function(e){return _this.mouseover.emit(e)}),editor.on(TinyMceEvents.MouseOut,function(e){return _this.mouseout.emit(e)}),editor.on(TinyMceEvents.MouseEnter,function(e){return _this.mouseenter.emit(e)}),editor.on(TinyMceEvents.MouseLeave,function(e){return _this.mouseleave.emit(e)}),editor.on(TinyMceEvents.KeyDown,function(e){return _this.keydown.emit(e)}),editor.on(TinyMceEvents.KeyPress,function(e){return _this.keypress.emit(e)}),editor.on(TinyMceEvents.KeyUp,function(e){_this.ngZone.run(function(){_this.onModelChange(_this.editor.getContent()),_this.onModelTouched()}),_this.keyup.emit(e)}),editor.on(TinyMceEvents.ContextMenu,function(e){return _this.contextmenu.emit(e)}),editor.on(TinyMceEvents.Paste,function(e){return _this.paste.emit(e)}),editor.on(TinyMceEvents.Focus,function(e){return _this.focus.emit(e)}),editor.on(TinyMceEvents.Blur,function(e){return _this.blur.emit(e)}),editor.on(TinyMceEvents.BeforeSetContent,function(e){return _this.beforesetcontent.emit(e)}),editor.on(TinyMceEvents.SetContent,function(e){return _this.setcontent.emit(e)}),editor.on(TinyMceEvents.GetContent,function(e){return _this.getcontent.emit(e)}),editor.on(TinyMceEvents.PreProcess,function(e){return _this.preprocess.emit(e)}),editor.on(TinyMceEvents.PostProcess,function(e){return _this.postprocess.emit(e)}),editor.on(TinyMceEvents.NodeChange,function(e){return _this.nodechange.emit(e)}),editor.on(TinyMceEvents.Undo,function(e){return _this.undo.emit(e)}),editor.on(TinyMceEvents.Redo,function(e){return _this.redo.emit(e)}),editor.on(TinyMceEvents.Change,function(e){return _this.change.emit(e)}),editor.on(TinyMceEvents.Dirty,function(e){return _this.dirty.emit(e)}),editor.on(TinyMceEvents.Remove,function(e){return _this.remove.emit(e)}),editor.on(TinyMceEvents.ExecCommand,function(e){_this.ngZone.run(function(){var content=_this.editor.getContent();null!=content&&content.length>0&&(_this.onModelChange(content),_this.onModelTouched())}),_this.execcommand.emit(e)}),editor.on(TinyMceEvents.PastePreProcess,function(e){return _this.pastepreprocess.emit(e)}),editor.on(TinyMceEvents.PastePostProcess,function(e){return _this.pastepostprocess.emit(e)})},settings.setup=function(editor){editor.on(TinyMceEvents.Init,function(e){return _this.init.emit(e)})}},TinyMceComponent.prototype.ngOnDestroy=function(){this.editor&&tinymce.remove(this.editor)},TinyMceComponent}();TinyMceComponent.decorators=[{type:_angular_core.Component,args:[{selector:"angular-tinymce",template:"<textarea #tinymce ></textarea>",providers:[{provide:_angular_forms.NG_VALUE_ACCESSOR,useExisting:_angular_core.forwardRef(function(){return TinyMceComponent}),multi:!0}]}]}],TinyMceComponent.ctorParameters=function(){return[{type:void 0,decorators:[{type:_angular_core.Inject,args:[TINYMCE_SETTINGS_TOKEN]}]},{type:_angular_core.NgZone}]},TinyMceComponent.propDecorators={isDisabled:[{type:_angular_core.Input}],settings:[{type:_angular_core.Input}],selector:[{type:_angular_core.Input}],click:[{type:_angular_core.Output}],dblclick:[{type:_angular_core.Output}],mousedown:[{type:_angular_core.Output}],mouseup:[{type:_angular_core.Output}],mousemove:[{type:_angular_core.Output}],mouseover:[{type:_angular_core.Output}],mouseout:[{type:_angular_core.Output}],mouseenter:[{type:_angular_core.Output}],mouseleave:[{type:_angular_core.Output}],keydown:[{type:_angular_core.Output}],keypress:[{type:_angular_core.Output}],keyup:[{type:_angular_core.Output}],contextmenu:[{type:_angular_core.Output}],paste:[{type:_angular_core.Output}],init:[{type:_angular_core.Output}],focus:[{type:_angular_core.Output}],blur:[{type:_angular_core.Output}],beforesetcontent:[{type:_angular_core.Output}],setcontent:[{type:_angular_core.Output}],getcontent:[{type:_angular_core.Output}],preprocess:[{type:_angular_core.Output}],postprocess:[{type:_angular_core.Output}],nodechange:[{type:_angular_core.Output}],undo:[{type:_angular_core.Output}],redo:[{type:_angular_core.Output}],change:[{type:_angular_core.Output}],dirty:[{type:_angular_core.Output}],remove:[{type:_angular_core.Output}],execcommand:[{type:_angular_core.Output}],pastepreprocess:[{type:_angular_core.Output}],pastepostprocess:[{type:_angular_core.Output}],elem:[{type:_angular_core.ViewChild,args:["tinymce"]}]};var TinyMceModule=function(){function TinyMceModule(){}return TinyMceModule.forRoot=function(settings){return{ngModule:TinyMceModule,providers:[{provide:TINYMCE_SETTINGS_TOKEN,useValue:settings}]}},TinyMceModule}();TinyMceModule.decorators=[{type:_angular_core.NgModule,args:[{imports:[_angular_common.CommonModule],declarations:[TinyMceComponent],exports:[TinyMceComponent]}]}],TinyMceModule.ctorParameters=function(){return[]},exports.TinyMceComponent=TinyMceComponent,exports.TINYMCE_SETTINGS_TOKEN=TINYMCE_SETTINGS_TOKEN,exports.tinymceDefaultSettings=tinymceDefaultSettings,exports.TinyMceEvents=TinyMceEvents,exports.TinyMceModule=TinyMceModule,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=angular-tinymce.umd.min.js.map
